<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/style.css" rel="stylesheet">
    <title>Document</title>
</head>
<body>
    <div class="join-bg">
        <div class="container">
            <h2>회원가입</h2>
            <form>
                <div class = "info">
                    <div class = "info-text">이름</div>
                    <input id = "name">
                    <p id = "name-correct">멋진 이름이네요!</p>
                    <p id = "name-wrong">필수 입력 항목입니다!</p>
                </div>
                <div class = "info">
                    <div class = "info-text">이메일</div>
                    <input  id = "email">
                    <p id = "email-correct">올바른 이메일 형식입니다!</p>
                    <p id = "email-wrong">올바른 이메일 형식이 아닙니다!</p>
                </div>
                <div class = "info">
                    <div class = "info-text">나이</div>
                    <input id = "age">
                    <p id = "age-correct">올바른 나이 형식입니다!</p>
                    <p class = "age-wrong">나이를 입력해주세요!</p>
                    <p class = "age-wrong">나이는 숫자형식이어야 합니다!</p>
                    <p class = "age-wrong">나이는 음수가 될 수 없습니다!</p>
                    <p class = "age-wrong">나이는 소수가 될 수 없습니다!</p>
                    <p class = "age-wrong">미성년자는 가입할 수 없습니다!</p>
                    
                </div>
                <div class = "info">
                    <div class = "info-text">비밀번호</div>
                    <input id = "pass" type="password">
                    <p id = "pass-correct">올바른 비밀번호 입니다!</p>
                    <p class = "pass-wrong">비밀번호는 최소 4자리 이상이어야 합니다.</p>
                    <p class = "pass-wrong">비밀번호는 최대 12자리까지 가능합니다.</p>
                    <p class = "pass-wrong">영어, 숫자, 특수문자를 모두 조합해서 비밀번호를 작성해주세요.</p>
                </div>
                <div class = "info">
                    <div class = "info-text">비밀번호 확인</div>
                    <input id = "repass" type = "password">
                    <p id = "repass-correct">비밀번호가 일치합니다.</p>
                    <p id = "repass-wrong">비밀번호가 일치하지 않습니다.</p>
                </div>
                <button id="btn" type="button" style="margin-top: 20px;">가입하기</button>
            </form>
        </div>
    </div>
    <div class = "correct-modal-bg">
        <div class = "correct-modal">
            <h4>가입 성공!</h4>
            <h5>umc 챌린저 가입을 축하합니다!</h5>
            <div id="correct-btn">
                <button>닫기</button>
            </div>
        </div>
    </div>
</body>
</html>

<script>

    const checkname = document.getElementById("name");
    const checkemail = document.getElementById("email");
    const checkage = document.getElementById("age");
    const checkpass = document.getElementById("pass");
    const checkrepass = document.getElementById("repass");
    const btn = document.getElementById("btn");

    let allcorrect = [0,0,0,0,0];

    btn.onclick = () =>{
        //이름
        var name = checkname.value;
        var email = checkemail.value;
        var age = checkage.value;
        var pass = checkpass.value;
        var repass = checkrepass.value;

        //1. 이름 판별
        //빈 문자열이 아닌지, 문자열이며 숫자가 아닌 경우 통과
        if(name.length > 0 && typeof name == 'string'&& isNaN(name)){
            document.getElementById("name-correct").style.display = "block";
            document.getElementById("name-wrong").style.display = "none";
            allcorrect[0] = 1;
        }
        else{
            document.getElementById("name-wrong").style.display = "block";
            document.getElementById("name-correct").style.display = "none";
            allcorrect[0] = 0;
        }

        //2. 이메일 판별
        if(email.length > 0 && typeof email == 'string' && email.includes('@')){
            document.getElementById("email-correct").style.display = "block";
            document.getElementById("email-wrong").style.display = "none";
            allcorrect[1] = 1;
        }
        else{
            document.getElementById("email-wrong").style.display = "block";
            document.getElementById("email-correct").style.display = "none";
            allcorrect[1] = 0;
        }

        //3. 나이 판별
        var agewrong = document.getElementsByClassName("age-wrong");
        //display none으로 초기화
        for(var i = 0; i < agewrong.length; i++){
            agewrong[i].style.display = "none";
        }
        document.getElementById("age-correct").style.display = "none";

        if(age.length == 0){
            //입력을하지않은 경우
            agewrong[0].style.display = "block";
            allcorrect[2] = 0;
        }
        else if(isNaN(age)){
            //문자열인 경우
            agewrong[1].style.display = "block";
            allcorrect[2] = 0;
        }
        else if(age < 0){
            //음수인 경우
            agewrong[2].style.display = "block";
            allcorrect[2] = 0;
        }
        else if(age % 1 != 0){
            //소수인 경우
            agewrong[3].style.display = "block";
            allcorrect[2] = 0;
        }
        else if(age < 19){
            //미성년자인 경우
            agewrong[4].style.display = "block";
            allcorrect[2] = 0;
        }
        else{
            document.getElementById("age-correct").style.display = "block";
            allcorrect[2] = 1;
        }

        //4.비밀번호 판별
        
        var wrongpass = document.getElementsByClassName("pass-wrong");
        for(var i = 0; i< wrongpass.length; i++){
            wrongpass[i].style.display = "none";
        }
        document.getElementById("pass-correct").style.display = "none";

        //비밀번호 정규식
        var passwordRegex = /^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*?_]).{4,12}$/;
        if(passwordRegex.test(pass)){
            document.getElementById("pass-correct").style.display = "block";
            allcorrect[3] = 1;
        }
        else{
            allcorrect[3] = 0;
            if(pass.length < 4){
                //4자리 이하
                wrongpass[0].style.display = "block";
            }
            else if(pass.length > 12){
                //12자리 초과
                wrongpass[1].style.display = "block";
            }
            else{
                //형식을 지키지않을 경우
                wrongpass[2].style.display = "block";
            }
        }


        //5.비밀번호 일치 판별
        document.getElementById("repass-wrong").style.display = "none";
        document.getElementById("repass-correct").style.display = "none";
        if(repass.length == 0 || repass != pass){
            document.getElementById("repass-wrong").style.display = "block";
            allcorrect[4] = 0;
        }
        else{
            document.getElementById("repass-correct").style.display = "block";
            allcorrect[4] = 1;
        }




        //모든 요건을 충족했을 경우
        let check = 1;
        for(var i = 0; i<5; i++){
            if(allcorrect[i] == 0) {
                check = 0;
            }
        }
        if(check){
            document.getElementsByClassName("correct-modal-bg")[0].style.display = "flex";
        }
    }
</script>